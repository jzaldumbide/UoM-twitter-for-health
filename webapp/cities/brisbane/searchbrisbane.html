
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>



  <title>Search Health</title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
</head>
<body><div style="background-color: rgba(204, 255, 255, 0.4);border-radius: 25px"><br>
  <h1 align="center">Exploring Health on Brisbane</h1>
  <br />
  <p align="center"><input id="searchterm" size="80" align="center"/></p>
  <br>
  <!-- <button id="search">search</button> -->
  <div id="results" ">

  </div>

  <div id="resultstable">

  </div>


  <script type="text/javascript">


    $("#searchterm").keyup(function(e){

    var q = $("#searchterm").val();

    $.getJSON("http://127.0.0.1:9200/brisbane/_search?&size=1000",//local
    //$.getJSON('http://115.146.93.161:9200/brisbaneindex/_search?&q=dengue&size=10000', //remote
    
    //$.getJSON("http://115.146.93.32:9200/sydneyindex/_search?",  //remote
    //$.getJSON("http://115.146.93.32:9200/_search?",
    {
    q: q

  },

  function(data) {
  var txt="";
  var counter=0;
  $("#results").empty();
  $("#results").append("<p>Results for <b>" + q + "</b></p>");
  $.each(data.hits, function(i1,lvl1){
  if(i1!='max_score'&&i1!='hits') 
  {
  txt+=i1+" Tweets found: "+lvl1+"<br>";
}

$.each(lvl1, function(i2,lvl2){
counter++;
txt+="<br>"+counter+":<br> ";
$.each(lvl2._source, function(i3,lvl3){

if(i3!='_rev'
&&i3!='_id'
&&i3!='filter_level'
&&i3!='truncated'
&&i3!='contributors'
&&i3!='in_reply_to_screen_name'
&&i3!='in_reply_to_status_id_str'
&&i3!='in_reply_to_user_id_str'
&&i3!='in_reply_to_user_id'
&&i3!='source'
&&i3!='in_reply_to_status_id'
&&i3!='id_str'


){  //mostrar solo lo que me interesa                               
txt+=i3+": "+lvl3+"<br>";

}
});
});
});
$("#results").append(txt);//le digo donde quiero que salga
});
});
</script>


<div style="position:absolute;bottom:0;right:0;text-align:right">
  <br>
</div></div>
<footer align="right" style="background-color: rgba(204, 255, 255, 0.4);border-radius: 1	5px">

  <p><a href="jzaldumbide@student.unimelb.edu.au">
    jzaldumbide@student.unimelb.edu.au</a></p>
  </footer>
</body>
</html>
